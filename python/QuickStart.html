<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>HFST - Helsinki Finite-State Transducer Technology - Python API: Quick Start to HFST</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">HFST - Helsinki Finite-State Transducer Technology - Python API
   &#160;<span id="projectnumber">version 3.9.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Quick Start to HFST </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="using_hfst"></a>
Using HFST in your own code</h1>
<p>After <a href="InstallHfst.html">installing</a> HFST on your computer, start python3 and execute <code>import libhfst</code>.</p>
<p>For example, the following simple program</p>
<pre class="fragment"> import libhfst
 
 tr1 = libhfst.regex('foo:bar')
 tr2 = libhfst.regex('bar:baz')
 tr1.compose(tr2)
 print(tr1)</pre><p>should print to standard output the following text when run:</p>
<pre class="fragment"> 0      1     foo    baz    0
 1      0</pre><p><br />
</p>
<h1><a class="anchor" id="hfst_structure"></a>
Structure of the API</h1>
<p>The HFST API is written in module libhfst that includes the following classes:</p>
<ul>
<li><a class="el" href="classlibhfst_1_1HfstTransducer.html" title="A synchronous finite-state transducer. ">HfstTransducer</a>: A class for creating transducers and performing operations on them.</li>
<li><a class="el" href="classlibhfst_1_1HfstInputStream.html" title="A stream for reading HFST binary transducers. ">HfstInputStream</a> and <a class="el" href="classlibhfst_1_1HfstOutputStream.html" title="A stream for writing binary transducers. ">HfstOutputStream</a>: Classes for writing and reading binary transducers.</li>
<li><a class="el" href="classlibhfst_1_1HfstBasicTransducer.html" title="A simple transducer class with tropical weights. ">HfstBasicTransducer</a>: A class for creating transducers from scratch and iterating through their states and transitions.</li>
<li><a class="el" href="classlibhfst_1_1HfstTokenizer.html" title="A tokenizer for creating transducers from UTF-8 strings. ">HfstTokenizer</a>: A class used in creating transducers from UTF-8 strings.</li>
</ul>
<p>There are also functions in module libhfst that are not part of any class. For example <a class="el" href="namespacelibhfst.html#a78302bf5a1722d116ce224b72c94ecea" title="Get a transducer that recognizes one or more paths. ">libhfst.fst</a></p>
<p><br />
</p>
<h1><a class="anchor" id="hfst_examples"></a>
Examples of HFST functionalities</h1>
<p>An example of creating a simple transducer from scratch and converting between transducer formats and testing transducer properties and handling exceptions:</p>
<pre class="fragment"> import libhfst
 # Create as HFST basic transducer [a:b] with transition weight 0.3 and final weight 0.5.
 t = libhfst.HfstBasicTransducer()
 t.add_state(1)
 t.add_transition(0, 1, 'a', 'b', 0.3)
 t.set_final_weight(1, 0.5)

 # Convert to tropical OpenFst format (the default) and push weights toward final state.
 T = libhfst.HfstTransducer(t)
 T.push_weights(libhfst.TO_FINAL_STATE)

 # Convert back to HFST basic transducer.
 tc = libhfst.HfstBasicTransducer(T)
 try:
     # Rounding might affect the precision.
     if (0.79 &lt; tc.get_final_weight(1)) and (tc.get_final_weight(1) &lt; 0.81):
         print("TEST PASSED")
         exit(0)
     else:
         print("TEST FAILED")
         exit(1)
 # If the state does not exist or is not final
 except libhfst.HfstException:
     print("TEST FAILED: An exception thrown.")
     exit(1)</pre><p>An example of creating transducers from strings, applying rules to them and printing the string pairs recognized by the resulting transducer.</p>
<pre class="fragment"> import libhfst
 libhfst.set_default_fst_type(libhfst.FOMA_TYPE)
 
 # Create a simple lexicon transducer [[foo bar foo] | [foo bar baz]].
 tok = libhfst.HfstTokenizer()
 tok.add_multichar_symbol('foo')
 tok.add_multichar_symbol('bar')
 tok.add_multichar_symbol('baz')
 
 words = libhfst.tokenized_fst(tok.tokenize('foobarfoo'))
 t = libhfst.tokenized_fst(tok.tokenize('foobarbaz'))
 words.disjunct(t)
 
 # Create a rule transducer that optionally replaces 'bar' with 'baz' between 'foo' and 'foo'.
 rule = libhfst.regex('bar (-&gt;) baz || foo _ foo')
 
 # Apply the rule transducer to the lexicon.
 words.compose(rule).minimize()
 
 # Extract all string pairs from the result and print them to standard output.
 results = 0
 try:
     # Extract paths and remove tokenization
     results = words.extract_paths(output='dict')
 except libhfst.TransducerIsCyclicException:
     # This should not happen because transducer is not cyclic.
     print("TEST FAILED")
     exit(1)
 
 for input,outputs in results.items():
     print('%s:' % input)
     for output in outputs:
         print('  %s\t%f' % (output[0], output[1]))</pre><p>The output:</p>
<pre class="fragment"> foobarfoo:
   foobarfoo     0.000000
   foobazfoo     0.000000
 foobarbaz:
   foobarbaz     0.000000</pre><p><br />
 </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 2 2016 13:04:59 for HFST - Helsinki Finite-State Transducer Technology - Python API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
